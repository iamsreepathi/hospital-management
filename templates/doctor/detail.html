{% extends 'layouts/base.html' %}
{% load custom_tags %}

{% block content %} 
<section class="flex items-center divide-x border shadow-sm p-4">
    <div class="w-1/5 justify-center items-center mr-4 space-y-2 text-gray-500 ">
        <img class="h-full w-full object-cover" src="https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=256&q=80" alt="Your avatar">
        {% if rating %}
            {% include "components/global/rating.html" with rated=rated unrated=unrated rating=rating %}
        {% endif %}
        <div class="text-center hover:text-orange-400 hover:cursor-pointer border rounded p-2">
            <a href="{% url 'doctors:rating' object.id %}">More reviews</a>
        </div>
    </div>
    <div class="w-4/5 pl-4 space-y-4">
        <div class="space-y-2">
            <p class="font-semibold">{{object.first_name}} {{object.last_name}}</p>
            <p class="text-gray-500 text-sm">{{object.specialization}}</p>
            <p class="text-sm">{{object.about}}</p>
        </div>
        <div class="grid grid-cols-2 gap-2 text-sm">
            <p class="flex space-x-1 items-center">
                <span>{% include "components/icons/mail.html" %}</span>
                <span>{{object.email}}</span>
            </p>
            <p class="flex space-x-1 items-center">
                <span>{% include "components/icons/address.html" %}</span>
                <span>{{object.address}}</span>
            </p>
            <p class="flex space-x-1 items-center">
                <span>{% include "components/icons/phone.html" %}</span>
                <span>{{object.contact_number}}</span>
            </p>
        </div>
    </div>
</section>
<section class="space-y-4">
    <table class="w-full text-sm text-left text-gray-500 relative overflow-x-auto rounded border">
        {% include "components/global/table_head.html" with columns=columns %}
        <tbody>
            {% for obj in page_obj%}
            <tr class="bg-white border-b">
                <td class="px-4 py-3">
                    {{obj.date}}
                </td>
                <td class="px-4 py-3">
                    {{obj.last_visit}}
                </td>
                <td class="px-4 py-3">
                    {{obj.patient.first_name}} {{obj.patient.last_name}}
                </td>
                <td class="px-4 py-3">
                    {{obj.get_status_display}}
                </td>
                <td class="px-4 py-3">
                    {% include "components/global/table_action.html" with obj=obj route="appointments:detail" %}
                </td>
            </tr>
            {% empty %}
                <tr>
                    <td class="px-4 py-3">No appointments found.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
   {% include "components/global/pagination.html" with page_obj=page_obj %}
</section>
{% endblock %}